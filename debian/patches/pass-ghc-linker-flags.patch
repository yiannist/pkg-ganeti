Author: Apollon Oikonomopoulos <apoikos@gmail.com>
Description: Pass linker flags to GHC
 Enable hardening (relro) and as-needed

Forwarded: no
Last-Update: 2013-11-01
--- a/Makefile.in
+++ b/Makefile.in
@@ -926,7 +926,8 @@
 HS_PROG_SRCS = $(patsubst %,%.hs,$(HS_DEFAULT_PROGS)) src/mon-collector.hs
 HS_BUILT_TEST_HELPERS = $(HS_BIN_ROLES:%=test/hs/%) test/hs/hail
 HFLAGS = -O -Wall -Werror -isrc -fwarn-monomorphism-restriction \
-	-fwarn-tabs $(GHC_BYVERSION_FLAGS) $(am__append_5) \
+	-fwarn-tabs -optl -Wl,-z,relro -optl -Wl,--as-needed \
+	$(GHC_BYVERSION_FLAGS) $(am__append_5) \
 	$(am__append_6) $(am__append_7)
 HTEST_SUFFIX = hpc
 HTEST_FLAGS = $(HFLAGS) -fhpc -itest/hs \
