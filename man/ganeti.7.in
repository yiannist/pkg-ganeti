.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GANETI" "7" "07 May 2010" "ganeti 2.0" ""

.SH NAME
ganeti \- cluster-based virtualization management
.SH SYNOPSIS

.nf
# gnt-cluster init cluster1.example.com
# gnt-node add node2.example.com
# gnt-instance add -n node2.example.com \\
> -o debootstrap --disk 0:size=30g \\
> -t plain instance1.example.com
    
.fi
.SH "DESCRIPTION"
.PP
The ganeti software manages physical nodes and virtual instances
of a cluster based on a virtualization software. The current
version (2.0) supports Xen 3.0 (also tested with 3.1) and KVM
hypervisors.
.SH "QUICK START"
.PP
First you must install the software on all the cluster nodes,
either from sources or (if available) from a package. The next
step is to create the initial cluster configuration, using
\fBgnt-cluster init\fR\&.
.PP
Then you can add other nodes, or start creating instances.
.SH "CLUSTER ARCHITECTURE"
.PP
In Ganeti 2.0, the architecture of the cluster is a little more
complicated than in 1.2. The cluster is coordinated by a master
daemon (\fBganeti-masterd\fR(8)), running on the master
node. Each node runs (as before) a node daemon, and the master
has the RAPI daemon running too.
.SS "NODE ROLES"
.PP
Each node can be in one of the following states:
.TP
\fBmaster\fR
Only one node per cluster can be in this role, and
this node is the one holding the authoritative copy of
the cluster configuration and the one that can
actually execute commands on the cluster and modify
the cluster state. See more details under
\fBCluster configuration\fR\&.
.TP
\fBmaster_candidate\fR
The node receives the full cluster configuration
(configuration file and jobs) and can become a master
via the \fBgnt-cluster masterfailover\fR
command. Nodes that are not in this state cannot
transition into the master role due to missing
state.
.TP
\fBregular\fR
This the normal state of a node.
.TP
\fBdrained\fR
Nodes in this state are functioning normally but
cannot receive new instance, because the intention is to
set them to \fBoffline\fR or remove them
from the cluster.
.TP
\fBoffline\fR
These nodes are still recorder in the ganeti
configuration, but except for the master daemon startup
voting procedure, they are not actually contacted by the
master. This state was added in order to allow broken
machines (that are being repaired) to remain in the
cluster but without creating problems.
.SS "CLUSTER CONFIGURATION"
.PP
The master node keeps and is responsible for the cluster
configuration. On the filesystem, this is stored under the
\fI@LOCALSTATEDIR@/ganeti/lib\fR
directory, and if the master daemon is stopped it can be backed
up normally.
.PP
The master daemon will replicate the configuration
database called \fIconfig.data\fR and the job
files to all the nodes in the master candidate role. It will
also distribute a copy of some configuration values via the
\fBssconf\fR files, which are stored in the same
directory and start with \fIssconf_\fR prefix, to
all nodes.
.SS "JOBS"
.PP
All cluster modification are done via jobs. A job consists of
one or more opcodes, and the list of opcodes is processed
serially. If an opcode fails, the entire job is failed and
later opcodes are no longer processed. A job can be in one of
the following states:
.TP
\fBqueued\fR
The job has been submitted but not yet
processed by the master daemon.
.TP
\fBwaiting\fR
The job is waiting for for locks before the
first of its opcodes.
.TP
\fBcanceling\fR
The jos is waiting for locks, but is has been
marked for cancellation. It will not transition to
\fBrunning\fR, but to
\fBcanceled\fR\&.
.TP
\fBrunning\fR
The job is currently being executed.
.TP
\fBcanceled\fR
The job has been canceled before starting
execution.
.TP
\fBsuccess\fR
The job has finished successfully.
.TP
\fBerror\fR
The job has failed during runtime, or the master
daemon has been stopped during the job execution.
.SH "REPORTING BUGS"
.PP
Report bugs to  <URL:http://code.google.com/p/ganeti/> or contact the
developers using the ganeti mailing list
<ganeti@googlegroups.com>\&.
.SH "SEE ALSO"
.PP
Ganeti overview and specifications:
\fBganeti\fR(7) (general overview),
\fBganeti-os-interface\fR(7) (guest OS definitions).
.PP
Ganeti commands:
\fBgnt-cluster\fR(8) (cluster-wide commands),
\fBgnt-job\fR(8) (job-related commands),
\fBgnt-node\fR(8) (node-related commands),
\fBgnt-instance\fR(8) (instance commands),
\fBgnt-os\fR(8) (guest OS commands),
\fBgnt-backup\fR(8) (instance import/export commands),
\fBgnt-debug\fR(8) (debug commands).
.PP
Ganeti daemons:
\fBganeti-watcher\fR(8) (automatic instance restarter),
\fBganeti-cleaner\fR(8) (job queue cleaner),
\fBganeti-noded\fR(8) (node daemon),
\fBganeti-masterd\fR(8) (master daemon),
\fBganeti-rapi\fR(8) (remote API daemon).
.SH "COPYRIGHT"
.PP
Copyright (C) 2006, 2007, 2008, 2009 Google Inc. Permission is
granted to copy, distribute and/or modify under the terms of the
GNU General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your option)
any later version.
.PP
On Debian systems, the complete text of the GNU General Public
License can be found in /usr/share/common-licenses/GPL.
